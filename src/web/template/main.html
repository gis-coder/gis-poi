<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no,shrink-to-fit=no">
  <link rel="stylesheet" href="../css/bootstrap/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/leaflet/leaflet.css" />
  <link rel="stylesheet" href="../css/leaflet/easy-button.css" />
  <script src="../js/leaflet/leaflet.js"></script>
  <script src="../js/leaflet/easy-button.js"></script>
  <title>主页</title>
  <style type="text/css">
    /* leaflet全屏处理 */
    html,
    body {
      height: 100%;
      width: 100%;
      padding: 0;
      margin: 0;
    }

    .left-list {
      width: 15%;
      height: 100%;
    }

    .map-container {
      width: 80%;
      height: 92%;
      padding: 0;
      margin: 0;
      
    }
  </style>
</head>
</script>

<body>
  <nav class="navbar navbar-static-top navbar-expand-sm bg-info navbar-dark">
    <a href="#" class="navbar-brand">
      <img width="30" height="30" class="d-inline-block align-top" src="../img/earth-globe.png" alt="">
      地图
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="#">排行</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">文章</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">分析</a>
      </li>
    </ul>
    <form class="form-inline ml-auto" role="search">
      <input class="form-control" type="text">
      <button class="btn btn-info" type="submit">搜索</button>
    </form>
    <ul class="navbar-nav justify-content-end">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
          用户名
        </a>
        <div class="dropdown-menu" style="min-width: 80px;">
          <a class="dropdown-item" href="#">历史</a>
          <a class="dropdown-item" href="#">信息</a>
          <a class="dropdown-item" href="#">报告</a>
          <a class="dropdown-item" href="#">退出</a>
        </div>
      </li>
    </ul>
  </nav>
  <!-- <div class="left-list" id="left-list">
    <li>
      <a>aa</a>      
    </li>
    <li>
      <a>aa</a>      
    </li>
    <li>
      <a>aa</a>      
    </li>
  </div> -->
  <div class="map-container" id="mapDiv">
  </div>

    <script>
      //初始化 地图容器
      var attr = '地图服务来源是OpenStreetMap，示例仅用于展示和个人使用。';
      var corner1 = L.latLng(-90, -180); // 地图左下角
      var corner2 = L.latLng(90, 180); // 地图右上角
      var bounds = L.latLngBounds(corner1, corner2); // 根据2个经纬度来确定一个矩形 

      var leafletMap = L.map('mapDiv', {
        //zoomControl:false,//默认是否显示缩放控件
        maxZoom: 18,
        minZoom: 2,
        crs: L.CRS.EPSG3857,
        maxBounds: bounds
      }).setView([0, 0], 2);

      //设置地图容器的最大显示范围
      leafletMap.setMaxBounds(bounds);

      //添加一个切片地图服务
      var url =
        'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
      L.tileLayer(url, {
        attribution: attr
      }).addTo(leafletMap);

      // 设置默认缩放控件的位置
      leafletMap.zoomControl.setPosition('topright');
      // 添加缩放控件至地图中
      //L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小',position:'topright'}).addTo(leafletMap);
      // 添加地图比例尺
      L.control.scale({
        maxWidth: 200,
        metric: true,
        imperial: false
      }).addTo(leafletMap);

      // var zoomTo = L.map('zoomto', {
      //   scrollWheelZoom: false
      // }).setView([37.8, -96], 4);
      // L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(leafletMap);

      // 在leaflet中添加自定义按钮使用插件easybutton
      L.easyButton('<img src="../img/position.png">', function () {
        leafletMap.setView([33, 106], 4);
      }).addTo(leafletMap);

      // easybutton示例
      // var stateChangingButton = L.easyButton({
      //   states: [{
      //     stateName: 'zoom-to-forest', // name the state
      //     icon: 'fa-tree', // and define its properties
      //     title: 'zoom to a forest', // like its title
      //     onClick: function (btn, map) { // and its callback
      //       map.setView([46.25, -121.8], 10);
      //       btn.state('zoom-to-school'); // change state on click!
      //     }
      //   }, {
      //     stateName: 'zoom-to-school',
      //     icon: 'fa-university',
      //     title: 'zoom to a school',
      //     onClick: function (btn, map) {
      //       map.setView([42.3748204, -71.1161913], 16);
      //       btn.state('zoom-to-forest');
      //     }
      //   }]
      // });

      // stateChangingButton.addTo(leafletMap);


      //增加一个marker ，地图上的标记，并绑定了一个popup，默认打开
      // L.marker([41, 123]).addTo(leafletMap)
      //   .bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup();

      //增加一个圈，设置圆心、半径、样式
      // L.circle([41, 123], 500, {
      //   color: 'red',
      //   fillColor: '#f03',
      //   fillOpacity: 0.5
      // }).addTo(leafletMap).bindPopup("I am a circle.");

      //增加多边形
      // L.polygon([
      //   [41, 123],
      //   [39, 121],
      //   [41, 126]
      // ]).addTo(leafletMap).bindPopup("I am a polygon.");

      //为点击地图的事件 增加popup
      // var popup = L.popup();

      // function onMapClick(e) {
      //   popup
      //     .setLatLng(e.latlng)
      //     .setContent("You clicked the map at " + e.latlng.toString())
      //     .openOn(leafletMap);
      // }
      // leafletMap.on('click', onMapClick);
    </script>

    <script src="../js/jQuery/jquery.min.js"></script>
    <script src="../js/popper/popper.min.js"></script>
    <script src="../js/bootstrap/bootstrap.min.js"></script>
</body>

</html>